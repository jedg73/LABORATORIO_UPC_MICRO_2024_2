#include<stdlib.h>
#include<stdio.h>
#include<pic18f57q43.h>
#include<xc.h>
#include "cabzon.h"
#include "teclado.h"

#define _XTAL_FREQ 4000000UL

void configuro();


void main()
{
    configuro();
    char tecla = 0;
    while(1)
    {
        tecla = teclado_getc();
        if(tecla != 0)
        {
            if(tecla == '1')
            {
                LATDbits.LATD0 = ~LATDbits.LATD0;
            }
            if(tecla == '2')
            {
               LATDbits.LATD1 = ~LATDbits.LATD1;
            }
            if(tecla == '3')
            {
                LATDbits.LATD2 = ~LATDbits.LATD2;
            }
            if(tecla == '4')
            {
                LATDbits.LATD3 = ~LATDbits.LATD3;
            }
            if(tecla == '5')
            {
                LATDbits.LATD4 = ~LATDbits.LATD4;
            }
            if(tecla == '6')
            {
                LATDbits.LATD5 = ~LATDbits.LATD5;
            }
            if(tecla == '7')
            {
                LATDbits.LATD6 = ~LATDbits.LATD6;
            }
            if(tecla == '8')
            {
                LATDbits.LATD7 = ~LATDbits.LATD7;
            }
        }
    }
}

void configuro()
{
    OSCCON1 = 0x60;  // HFINTOSC
    OSCFRQ = 0x02;   // HFINTOSC a 4MHz
    OSCEN = 0x40;    // HFINTOSC enable
    
    TRISB = 0xF0;
    ANSELB = 0x00;
    WPUB = 0xF0;
    TRISD = 0x00;
    ANSELD = 0x00;
    LATD = 0x00;
    teclado_init();
}
